<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>期约连锁</title>
	</head>
	<body>
    <script src="./preloading.js"></script>
		<script>
			//把期约逐个地串联起来是一种非常有用的编程模式。
			/*因为每个期约实例的方法(then()、catch()和fina
			lly())都会返回一个新的期约对象，而这个新期约又有
			自己的实例方法。*/

			let p = new Promise((resolve, reject) => {
			    console.log('first');
			    resolve();
			});

			p.then(() => console.log('second'))
			 .then(() => console.log('third'))
			 .then(() => console.log('fourth'));

			 //first second third fourth

			function delayedResolve(str) {
			    return new Promise((resolve, reject) => {
			        console.log(str);
			        setTimeout(resolve, 1000);
			    });
			}

			delayedResolve('p1 executor')
			.then(() => delayedResolve('p2 executor'))
			.then(() => delayedResolve('p3 executor'))
			.then(() => delayedResolve('p4 executor'));

		</script>
	</body>
</html>
